#{extends 'main.html' /}
#{set title:'New User' /}

#{set 'moreStyles'}
<link rel="stylesheet" href="/public/stylesheets/pages/validated-forms.css">
#{/set}

#{set 'moreScripts'}
<script src="/public/javascripts/form.validation.js"></script>
<script>
    $(document).ready(function() {
        load_sunset_hotels("/hotel", $("#hotel"), 1);
        load_catalog_bulbank("/hotelUnits?hotelId=1", $("#unit, #split"), "");
        load_catalog_bulbank("/program", $("#program"), 1);
        load_mealplan();
        $( "#hotel" ).change(function() {
            var hotel=$(this).val();
            load_catalog_bulbank("/hotelUnits?hotelId="+hotel, $("#unit, #split"));
        });
    });
</script>
#{/set}

*{<form action="/brokers/${masterBrokerId}"  method='POST' id='redirect'>}*
    *{<input name="id" type="hidden" value="${brokerId}" />}*
    *{<input id="name" name="name" type="hidden" value="" />}*
    *{<input id="mode" type="hidden" name="mode" value="#{if editMode}edit#{/if}#{else}create#{/else}"/>}*
*{</form>}*

<input id="id-value" type="hidden" value="${brokerId}"/>
<div class="col-lg-12 page-header">
    <div class="row">
        <div class="col-lg-12">
            <div class="row">
                <h1>&{'new'} Template Bulk Bank</h1>
            </div>
        </div>
    </div>
</div>
<!-- /.row -->
<div class="row">
    <div class="col-lg-12">
        <div class="panel panel-default">
            <div class="panel-heading" id="brokers-panel-title">
            &{'new'}
            </div>
            <div class="panel-body">
                <div class="row">

                        <form id="broker-form" role="form" action="" method="post">
                            <div class="col-sm-6">
                                <input id="master" name="master" type="hidden" value="${masterBrokerId}"/>
                                <div class="form-group">
                                    <label>&{'name'}</label>
                                    <input id="broker-name" type="text" name="broker-name" class="form-control" data-required="true" data-length="2" />
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>Hotel</label>
                                    <select  class="form-control" name="hotel" id="hotel"></select>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>Unit</label>
                                    <select  class="form-control" name="unit" id="unit"></select>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>Split</label>
                                    <select  class="form-control" name="split" id="split"></select>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>Program</label>
                                    <select  class="form-control" name="program" id="program"></select>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>Plan</label>
                                    <select  class="form-control" name="meal-plan" id="meal-plan"></select>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <label>Adults</label>
                                <input id="adults" class="form-control" type="number" maxlength="2" min="0" max="99" required="">
                            </div>
                            <div class="col-sm-6">
                                <label>Children</label>
                                <input id="children" class="form-control" type="number" maxlength="2" min="0" max="99" required="">
                            </div>
                            <div class="col-sm-6">
                                <label>Rate</label>
                                <input id="rate" class="form-control" type="number" maxlength="2" min="0" max="99" required="" step="0.01">
                            </div>
                            <div class="clearfix"></div><br /><br />
                            <div class="col-sm-11">
                                <textarea name="observations" id="observations" class="form-control" rows="3" requiredd maxlength="4000"></textarea>
                            </div>
                            <div id="cont" class="col-sm-1">0</div>
                            <div class="clearfix"></div><br />
                            <div class="col-sm-6">
                                #{if brokerId }
                                    #{secure.check 'EditarBroker'}
                                        <input type="submit" id="submit" class="btn btn-primary" value="&{'save'}">&nbsp; &{'or'}
                                    #{/secure.check}
                                #{/if}
                                #{else }
                                    #{secure.check 'CrearBroker'}
                                        <input type="submit" id="submit" class="btn btn-primary" value="&{'save'}">&nbsp; &{'or'}
                                    #{/secure.check}
                                #{/else}
                                <a href="/brokers/${masterBrokerId}" class="btn">&{'cancel'}</a>
                            </div>
                        </form>

                    <!-- /.col-lg-6 (nested) -->

                </div>
                <!-- /.row (nested) -->
            </div>
            <!-- /.panel-body -->
        </div>
        <!-- /.panel -->
    </div>
</div>